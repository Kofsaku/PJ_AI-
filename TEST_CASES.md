# ユーザー単位顧客データ管理 - テストケース

## 🎯 テスト目的
顧客データが企業単位から**ユーザー単位**に正しく変更され、データの分離が機能することを確認する。

## 📋 最低限テストケース

### ✅ **テスト1: ログイン後の顧客データ表示**
**目的**: 各ユーザーが自分のデータのみ表示されることを確認

**手順**:
1. http://localhost:3000 にアクセス
2. ユーザー1でログイン: `0910-2user@mail.com`
3. ダッシュボードで顧客リスト表示
4. **期待結果**: 移行済みの12件の顧客データが表示される

**確認ポイント**:
- [ ] 顧客リストが表示される
- [ ] 件数が正しい（12件）
- [ ] エラーが発生しない

---

### ✅ **テスト2: 新規顧客作成**
**目的**: ユーザー単位での新規顧客登録が機能することを確認

**手順**:
1. ユーザー1でログイン状態で「新規顧客追加」
2. テストデータ入力:
   - 名前: `テスト太郎`
   - 電話: `09012345678`
   - メール: `test@example.com`
3. 保存実行

**確認ポイント**:
- [ ] 顧客が正常に作成される
- [ ] ダッシュボードに新顧客が表示される
- [ ] エラーが発生しない

---

### ✅ **テスト3: CSVインポート機能**
**目的**: ユーザー単位でのCSVインポートが機能することを確認

**手順**:
1. ユーザー2で新規ログイン: `niku.niku.nikuman@icloud.com`
2. CSVインポート画面へ移動
3. `test_customers_user1.csv` をインポート

**確認ポイント**:
- [ ] CSVが正常にインポートされる
- [ ] 5件の顧客が追加される
- [ ] 既存データ（1件）と合わせて6件表示される

---

### ✅ **テスト4: ユーザー間データ分離確認**
**目的**: 他のユーザーのデータが見えないことを確認

**手順**:
1. ユーザー1 (`0910-2user@mail.com`) でログイン
2. 顧客リスト件数を確認 → A件
3. ログアウト
4. ユーザー2 (`niku.niku.nikuman@icloud.com`) でログイン
5. 顧客リスト件数を確認 → B件

**確認ポイント**:
- [ ] ユーザー1とユーザー2の顧客件数が異なる
- [ ] 各ユーザーが異なる顧客リストを表示
- [ ] データが混在していない

---

### ✅ **テスト5: 顧客詳細・編集機能**
**目的**: 個別顧客の詳細表示・編集が機能することを確認

**手順**:
1. 任意のユーザーでログイン
2. 顧客リストから1件選択
3. 詳細画面を表示
4. 情報を編集（例: 備考欄に「テスト編集」）
5. 保存

**確認ポイント**:
- [ ] 顧客詳細が正常に表示される
- [ ] 編集が正常に保存される
- [ ] リストに変更が反映される

---

## 🔍 **APIレベルテスト（オプション）**

### API直接テスト
```bash
# 顧客一覧取得（要認証）
curl -H "Authorization: Bearer [TOKEN]" http://localhost:5001/api/customers

# 新規顧客作成（要認証）
curl -X POST -H "Content-Type: application/json" \
  -H "Authorization: Bearer [TOKEN]" \
  -d '{"customer":"APIテスト太郎","phone":"09099999999"}' \
  http://localhost:5001/api/customers
```

## 📊 **成功基準**
- [ ] すべてのテストケースがエラーなく完了
- [ ] ユーザー間でデータが完全に分離されている
- [ ] 既存機能（作成・編集・削除・インポート）が正常動作
- [ ] パフォーマンス低下がない

## ⚠️ **失敗時の確認事項**
1. ブラウザの開発者ツールでエラーログ確認
2. サーバーログ確認（Backend Bash 0b7b0b）
3. MongoDB接続状況確認
4. 認証トークンの有効性確認