# AI Voice Settings and Prompt Improvements

## Overview
OpenAI Realtime APIã®ãƒœã‚¤ã‚¹è¨­å®šã®æœ€é©åŒ–ã¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®æ”¹å–„ã‚’å®Ÿæ–½ã—ã¾ã—ãŸã€‚

## Status
- **Status**: Completed
- **Date**: 2025-10-21
- **Implemented By**: Claude Code

## Problem Statement
1. OpenAIå…¬å¼ã®8ç¨®é¡ã®voiceã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã ãŒã€ã‚·ã‚¹ãƒ†ãƒ ã§ã¯3ã¤ã®ã¿å®šç¾©ã•ã‚Œã¦ã„ãŸ
2. ä¼šè©±ãƒˆãƒ¼ãƒ³ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ãŒ3ã¤ï¼ˆformal/casual/friendlyï¼‰ã‚ã‚‹ãŒã€ãƒ†ãƒ¬ã‚¢ãƒã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦ã¯ãƒ•ã‚©ãƒ¼ãƒãƒ«ã®ã¿ãŒé©åˆ‡
3. OpenAIå…¬å¼ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«åŸºã¥ããƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ãŒå¿…è¦
4. AIè¨­å®šãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œãªã„ä¸å…·åˆï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒæœ¬ç•ªURLã«æ¥ç¶šã—ã¦ã„ãŸï¼‰

## Solution

### 1. AIè¨­å®šä¿å­˜ã®ä¸å…·åˆä¿®æ­£
**å•é¡Œ**: AIè¨­å®šï¼ˆvoiceã€conversationStyleã€speechRateï¼‰ãŒä¿å­˜ã•ã‚Œãªã„

**åŸå› **:
```typescript
// frontend/app/api/users/sales-pitch/route.ts (ä¿®æ­£å‰)
const BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL_PROD || process.env.NEXT_PUBLIC_BACKEND_URL
```
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰APIãƒ—ãƒ­ã‚­ã‚·ãŒæœ¬ç•ªURLã‚’å„ªå…ˆã—ã€ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«æ¥ç¶šã—ã¦ã„ãªã‹ã£ãŸã€‚

**ä¿®æ­£**:
```typescript
// frontend/app/api/users/sales-pitch/route.ts (ä¿®æ­£å¾Œ)
const BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL || process.env.NEXT_PUBLIC_BACKEND_URL_PROD
```

**è¿½åŠ ä¿®æ­£**:
- Mongooseã®ãƒã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ›´æ–°ã«ã¯`markModified('conversationSettings')`ãŒå¿…è¦
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«`voice`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 

### 2. ä¼šè©±ãƒˆãƒ¼ãƒ³ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã€Œãƒ•ã‚©ãƒ¼ãƒãƒ«ã€ã«å›ºå®š
**å¤‰æ›´å†…å®¹**:
- UIã‹ã‚‰ä¼šè©±ãƒˆãƒ¼ãƒ³ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚’å‰Šé™¤
- `promptBuilder.js`ã§ä¼šè©±ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã€Œãƒ“ã‚¸ãƒã‚¹æ•¬èªï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒ«ï¼‰ã€ã«å›ºå®š
- `conversationStyle`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯DBäº’æ›æ€§ã®ãŸã‚ä¿æŒï¼ˆå¸¸ã«'formal'ã‚’é€ä¿¡ï¼‰

**ç†ç”±**: ãƒ†ãƒ¬ã‚¢ãƒã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦ã€ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã‚„ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒˆãƒ¼ãƒ³ã¯ä¸é©åˆ‡ã€‚ãƒ“ã‚¸ãƒã‚¹æ•¬èªã«çµ±ä¸€ã™ã‚‹ã“ã¨ã§ãƒ–ãƒ©ãƒ³ãƒ‰å“è³ªã‚’ç¶­æŒã€‚

### 3. AIãƒœã‚¤ã‚¹ã‚’3ç¨®é¡ã«å³é¸
**å¤‰æ›´å‰**: 8ç¨®é¡ï¼ˆalloy, ash, ballad, coral, echo, sage, shimmer, verseï¼‰
**å¤‰æ›´å¾Œ**: 3ç¨®é¡
- **alloy**: ä¸­æ€§çš„ã§æŸ”ã‚‰ã‹ã„
- **cedar**: ãƒã‚­ãƒã‚­ã¨æ˜ç­
- **coral**: æ¸©ã‹ãå‹å¥½çš„

**ç†ç”±**:
- é¸æŠè‚¢ãŒå¤šã™ãã‚‹ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿·ã†
- å®Ÿç”¨çš„ãª3ã¤ã®ãƒˆãƒ¼ãƒ³ã«çµã‚Šè¾¼ã¿
- æ—¥æœ¬èªã®ç‰¹å¾´èª¬æ˜ã®ã¿ã«ï¼ˆè‹±èªè¡¨è¨˜å‰Šé™¤ï¼‰

### 4. OpenAIå…¬å¼ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«åŸºã¥ããƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„
`backend/utils/promptBuilder.js`ã«ä»¥ä¸‹ã®æ”¹å–„ã‚’é©ç”¨:

#### è¿½åŠ é …ç›®:
1. **è¨€èªåˆ¶ç´„ã®æ˜ç¢ºåŒ–**
   ```
   ### ğŸŒ è¨€èªã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
   0. **æ—¥æœ¬èªã®ã¿**: å…¨ã¦ã®å¿œç­”ã¯æ—¥æœ¬èªã§è¡Œã†ã€‚è‹±èªã‚„ä»–è¨€èªã§ã®å•ã„ã‹ã‘ã«ã‚‚æ—¥æœ¬èªã§å¿œç­”
   ```

2. **é‡è¦ãƒ«ãƒ¼ãƒ«ã®å¤§æ–‡å­—å¼·èª¿**ï¼ˆOpenAIæ¨å¥¨ï¼‰
   ```
   NEVER discuss pricing, contracts, or costs. ALWAYS say "our representative will explain that."
   NEVER ask for personal information like email or address.
   NEVER provide detailed service explanations on your own.
   ```

3. **éŸ³å£°å“è³ªã¸ã®å¯¾å¿œ**
   ```
   ### ğŸ§ éŸ³å£°å“è³ªã¸ã®å¯¾å¿œ
   16. **èãå–ã‚Œãªã„å ´åˆ**: ã€Œæã‚Œå…¥ã‚Šã¾ã™ãŒã€ãŠé›»è©±ãŒå°‘ã—é ã„ã‚ˆã†ã§ã™ã€‚ã‚‚ã†ä¸€åº¦ãŠé¡˜ã„ã§ãã¾ã™ã§ã—ã‚‡ã†ã‹ã€
   17. **é›‘éŸ³ãŒã‚ã‚‹å ´åˆ**: å†…å®¹ã‚’æ¨æ¸¬ã›ãšã€ä¸å¯§ã«èãç›´ã™
   18. **æœ€å¤§2å›ã¾ã§**: åŒã˜å†…å®¹ã‚’2å›èãç›´ã—ã¦ã‚‚ä¸æ˜ãªå ´åˆã¯ã€Œç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ãŠé›»è©±ãŒé ã„ã‚ˆã†ã§ã™ã€‚æ”¹ã‚ã¦ã”é€£çµ¡ã•ã›ã¦ã„ãŸã ãã¾ã™ã€ã¨çµ‚è©±
   ```

4. **ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚»ãƒ¼ãƒ•ãƒ†ã‚£**
   ```
   ### ğŸš¨ å³åº§ã«é€šè©±ã‚’çµ‚äº†ã™ã¹ãçŠ¶æ³:
   - ç›¸æ‰‹ãŒæ€’ã£ã¦ã„ã‚‹ã€æš´è¨€ã‚’åã„ã¦ã„ã‚‹
   - ç›¸æ‰‹ãŒã€ŒäºŒåº¦ã¨ã‹ã‘ã¦ãã‚‹ãªã€ã¨æ˜ç¢ºã«æ‹’å¦
   - ç›¸æ‰‹ãŒæ³•çš„æªç½®ã‚’ç¤ºå”†ã—ã¦ã„ã‚‹
   - ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ã§éŸ³å£°ãŒé€”åˆ‡ã‚Œç¶šã‘ã¦ã„ã‚‹

   ### âš ï¸ å¯¾å¿œãŒé›£ã—ã„è³ªå•:
   - æŠ€è¡“çš„ãªè©³ç´°ï¼ˆã€Œã©ã†ã„ã†ä»•çµ„ã¿?ã€ç­‰ï¼‰
   - ç«¶åˆæ¯”è¼ƒï¼ˆã€Œâ—‹â—‹ç¤¾ã¨ã®é•ã„ã¯?ã€ç­‰ï¼‰
   - å°å…¥äº‹ä¾‹ã®è©³ç´°
   ```

5. **è¡¨ç¾ã®å¤šæ§˜æ€§ã¨ãƒšãƒ¼ã‚·ãƒ³ã‚°**
   ```
   ## ã€ãƒˆãƒ¼ãƒ³ãƒ»è©±ã—æ–¹ã€‘
   - ã‚¹ã‚¿ã‚¤ãƒ«: ãƒ“ã‚¸ãƒã‚¹æ•¬èªï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒ«ï¼‰
   - è©±ã™é€Ÿåº¦: ${getSpeechRateDescription(speechRate)}ã€‚ãŸã ã—æ€¥ã„ã§ã„ã‚‹å°è±¡ã¯ä¸ãˆãªã„
   - å§¿å‹¢: ç›¸æ‰‹ã®æ™‚é–“ã‚’å°Šé‡ã—ã€ç°¡æ½”ã«è¦ä»¶ã‚’ä¼ãˆã‚‹
   - é–“ã®å–ã‚Šæ–¹: ç›¸æ‰‹ã®å¿œç­”ã‚’å¾…ã¡ã€è¢«ã›ã¦è©±ã•ãªã„ã€‚ç›¸æ‰‹ãŒè©±ã—çµ‚ã‚ã‚‹ã¾ã§å¾…ã¤
   - è¡¨ç¾ã®å¤šæ§˜æ€§: åŒã˜æ–‡ç« ã‚’2å›ç¹°ã‚Šè¿”ã•ãªã„ã€‚å¿œç­”ã‚’å¤‰åŒ–ã•ã›ãƒ­ãƒœãƒƒãƒˆçš„ã«èã“ãˆãªã„ã‚ˆã†ã«ã™ã‚‹
   ```

## Implementation Details

### Files Changed
1. **frontend/app/api/users/sales-pitch/route.ts**
   - ç’°å¢ƒå¤‰æ•°ã®å„ªå…ˆé †ä½ã‚’ä¿®æ­£ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«å„ªå…ˆï¼‰

2. **frontend/app/settings/sales-pitch/page.tsx**
   - conversationStyleãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚’å‰Šé™¤
   - voiceé¸æŠã‚’3ç¨®é¡ã«å¤‰æ›´
   - voiceèª¬æ˜ã‚’æ—¥æœ¬èªåŒ–

3. **backend/models/AgentSettings.js**
   - voice enumã‚’3ç¨®é¡ã«æ›´æ–°
   - conversationStyleãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ï¼ˆ'formal'å›ºå®šã€äº’æ›æ€§ã®ãŸã‚ä¿æŒï¼‰

4. **backend/utils/promptBuilder.js**
   - conversationStyleã‚’'formal'å›ºå®šã«å¤‰æ›´
   - OpenAIå…¬å¼ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«åŸºã¥ãæ”¹å–„ã‚’è¿½åŠ 
   - getConversationStyleDescriptioné–¢æ•°ã‚’å‰Šé™¤ï¼ˆä¸è¦ã«ãªã£ãŸãŸã‚ï¼‰

5. **backend/routes/userRoutes.js**
   - markModified('conversationSettings')ã‚’è¿½åŠ 
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«voiceãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
   - ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°è¿½åŠ 

## Technical Challenges & Solutions

### Challenge 1: AIè¨­å®šãŒä¿å­˜ã•ã‚Œãªã„
**ç—‡çŠ¶**: UIã§è¨­å®šã‚’å¤‰æ›´ã—ã¦ã€Œä¿å­˜ã€ã‚’æŠ¼ã—ã¦ã‚‚ã€DBã«åæ˜ ã•ã‚Œãªã„

**èª¿æŸ»ãƒ—ãƒ­ã‚»ã‚¹**:
1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’ç¢ºèª â†’ ãƒ‡ãƒ¼ã‚¿ã¯æ­£ã—ãé€ä¿¡ã•ã‚Œã¦ã„ã‚‹
2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ­ã‚°ã‚’ç¢ºèª â†’ ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå±Šã„ã¦ã„ãªã„
3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰APIãƒ—ãƒ­ã‚­ã‚·ã‚’ç¢ºèª â†’ æœ¬ç•ªURLã«æ¥ç¶šã—ã¦ã„ãŸ

**è§£æ±ºç­–**: ç’°å¢ƒå¤‰æ•°ã®å„ªå…ˆé †ä½ã‚’å¤‰æ›´

**æ•™è¨“**:
- Next.js API Routesã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€ç’°å¢ƒå¤‰æ•°ã®å„ªå…ˆé †ä½ãŒé‡è¦
- é–‹ç™ºç’°å¢ƒã§ã¯`NEXT_PUBLIC_BACKEND_URL`ã‚’å„ªå…ˆã™ã¹ã
- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚ã¯å¿…ãš`localhost`URLã«æ¥ç¶šã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

### Challenge 2: Mongooseã§ãƒã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ›´æ–°ã•ã‚Œãªã„
**ç—‡çŠ¶**: conversationSettingsé…ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆconversationStyleã€speechRateï¼‰ã‚’æ›´æ–°ã—ã¦ã‚‚DBã«ä¿å­˜ã•ã‚Œãªã„

**åŸå› **: Mongooseã¯ãƒã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¤‰æ›´ã‚’è‡ªå‹•æ¤œçŸ¥ã—ãªã„

**è§£æ±ºç­–**:
```javascript
if (conversationStyle !== undefined || speechRate !== undefined) {
  agentSettings.markModified('conversationSettings');
}
```

**æ•™è¨“**:
- Mongooseã§ãƒã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ›´æ–°ã™ã‚‹éš›ã¯å¿…ãš`markModified()`ã‚’å‘¼ã¶
- ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆvoiceï¼‰ã¯è‡ªå‹•æ¤œçŸ¥ã•ã‚Œã‚‹
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å¤‰æ›´æ¤œçŸ¥ã®ä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦

### Challenge 3: OpenAI Realtime API voiceãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä»•æ§˜
**ç™ºè¦‹**: OpenAIå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã¨ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹å¾Œã¯voiceã‚’å¤‰æ›´ã§ããªã„

> "Once the model has emitted audio in a session, the voice cannot be modified for that session."

**å¯¾å¿œ**:
- voiceã¯session.updateæ™‚ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ï¼‰ã«è¨­å®š
- é€šè©±ä¸­ã®voiceå¤‰æ›´ã¯ä¸å¯
- UIã§voiceå¤‰æ›´å¾Œã¯æ–°ã—ã„é€šè©±ã§ã®ã¿åæ˜ 

**æ•™è¨“**:
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç´°ã‹ã„ä»•æ§˜ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã®é‡è¦æ€§
- ã€Œã§ãã‚‹ã“ã¨ã€ã ã‘ã§ãªãã€Œã§ããªã„ã“ã¨ã€ã‚‚æŠŠæ¡ã™ã‚‹

## Testing
- âœ… test@gmail.comã§AIè¨­å®šã®ä¿å­˜ã‚’ç¢ºèª
- âœ… voiceè¨­å®šãŒOpenAI APIã«æ­£ã—ãæ¸¡ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- âœ… ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«speechRateã¨conversationStyleãŒåæ˜ ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- âœ… å®Ÿéš›ã®é€šè©±ã§voiceï¼ˆballadâ†’alloyå¤‰æ›´æƒ³å®šï¼‰ãŒæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªäºˆå®š

## Commits
1. `8765b62` - debug: Add detailed logging for AI settings save/load
2. `40b19d6` - fix: Use markModified for conversationSettings nested fields
3. `bd6bc70` - fix: Include voice in PUT /api/users/sales-pitch response
4. `2349ca0` - fix: Add backend support for AI settings (voice, conversationStyle, speechRate)
5. `1c6f1e3` - feat: Add AI settings UI and speech rate control
6. `d52a92c` - feat: Update AI voice settings and improve prompt based on OpenAI docs
7. `4d83870` - refine: Simplify tone description in promptBuilder
8. `99a5a6d` - feat: Simplify AI voice options to 3 voices

## Impact
- **UXæ”¹å–„**: é¸æŠè‚¢ã‚’3ã¤ã«çµã‚Šè¾¼ã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„æ€æ±ºå®šã‚’ç°¡ç´ åŒ–
- **å“è³ªå‘ä¸Š**: ãƒ•ã‚©ãƒ¼ãƒãƒ«ãªãƒˆãƒ¼ãƒ³ã«çµ±ä¸€ã—ã€ãƒ–ãƒ©ãƒ³ãƒ‰å“è³ªã‚’ç¶­æŒ
- **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„**: OpenAIå…¬å¼ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«åŸºã¥ãã€ã‚ˆã‚Šè‡ªç„¶ã§å®‰å…¨ãªä¼šè©±ã‚’å®Ÿç¾
- **ä¿å®ˆæ€§å‘ä¸Š**: conversationStyleã‚’1ã¤ã«å›ºå®šã—ã€ã‚³ãƒ¼ãƒ‰ã®è¤‡é›‘æ€§ã‚’å‰Šæ¸›

## Future Considerations
1. voiceã®ç¨®é¡ã¯ä»Šå¾Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«åŸºã¥ã„ã¦èª¿æ•´å¯èƒ½
2. conversationStyleã‚’å°†æ¥çš„ã«ä¼æ¥­ã”ã¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹å ´åˆã¯ã€ç®¡ç†ç”»é¢ã§è¨­å®šå¯èƒ½ã«
3. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã¯ç¶™ç¶šçš„ã«æ”¹å–„ï¼ˆA/Bãƒ†ã‚¹ãƒˆç­‰ï¼‰
4. voiceã‚µãƒ³ãƒ—ãƒ«ã®è©¦è´æ©Ÿèƒ½è¿½åŠ ã‚’æ¤œè¨

## References
- [OpenAI Realtime API Documentation](https://platform.openai.com/docs/guides/realtime)
- OpenAIå…¬å¼ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼ˆ`backend/docs/Using realtime models`ï¼‰
- [Mongoose markModified Documentation](https://mongoosejs.com/docs/api/document.html#Document.prototype.markModified())
